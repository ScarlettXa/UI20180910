<!doctype html>
<html class="no-js">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta name="viewport"
        content="width=device-width, initial-scale=1">
  <title>修改手机</title>

  <!-- Set render engine for 360 browser -->
  <meta name="renderer" content="webkit">

  <!-- No Baidu Siteapp-->
  <meta http-equiv="Cache-Control" content="no-siteapp"/>

  <link rel="icon" type="image/png" href="/assets/i/favicon.png">

  <!-- Add to homescreen for Chrome on Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="icon" sizes="192x192" href="/assets/i/app-icon72x72@2x.png">

  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content=""/>
  <link rel="apple-touch-icon-precomposed" href="">

  <!-- Tile icon for Win8 (144x144 + tile color) -->
  <meta name="msapplication-TileImage" content="">
  <meta name="msapplication-TileColor" content="">

  <link rel="stylesheet" href="/assets/css/amazeui.min.css">
  <link rel="stylesheet" href="/assets/css/app.css">
  <script src="/assets/js/jquery-1.9.1.min.js"></script>
  <script src="/assets/js/amazeui.min.js"></script>
  
  <script src="http://mtopt.oss-cn-beijing.aliyuncs.com/cdn/mtopt-2.1-min.js"></script>
  <script src="http://mtopt.oss-cn-beijing.aliyuncs.com/cdn/mtopt/ui-2.0-min.js"></script>
  <script src="http://mtopt.oss-cn-beijing.aliyuncs.com/cdn/jquery-1.11.1.min.js"></script>
  <script src="http://mtopt.oss-cn-beijing.aliyuncs.com/cdn/highcharts-4.0.4/js/highcharts.js"></script>
  <script src="http://mtopt.oss-cn-beijing.aliyuncs.com/cdn/highcharts-4.0.4/js/highcharts-more.js"></script>
  <script src="/Scripts/engine.js"></script>
  <script type="text/javascript" language="javascript">
      var getType = "info", getName = "GetUserInfo", para = "", actName = "", chkPwd2Flag = 1;
      var id1 = 0;
    //ajax更换会员编号
    function changeUserName() {

    }       
  </script>
  <script type="text/javascript" src="/js/comm.js?timeStamp=1696026525"></script>
  <script type="text/javascript" src="/js/jquery_comm.js?timeStamp=1696026525"></script>  
</head>
<body class="i-body">

<header data-am-widget="header" class="am-header am-header-default ny-header">
    <div class="am-header-left am-header-nav">
      <a href="../Member/m-member.html?requestType=Mobile" class="">
				<i class="am-header-icon am-icon-angle-left"></i>
      </a>
  	</div>
    
    <h1 class="am-header-title">
      <a href="#title-link" class="ajaxlangMobileModi">
       修改手机
      </a>
    </h1>
    
    	
</header>


<main class="i-main" style="margin-bottom:56px">
	<div class="login-con">
      <form id="myForm" name="myForm" method="post" action="" onsubmit="return chkFormMobileModi()">
          <div data-tab-panel-1 class="am-tab-panel login-quick">
          	 <ul class="liebiao2">
           		<li><span class="ajaxmob"><input name="txtmobileOld" type="text" maxlength="20" id="txtmobileOld" value=""></span>原手机</li>

              <li>
                <a id="btnGetMobileCode1" class="ajaxlangGetVerificationCode" href="#myForm">获取验证码</a>
                <span style="width:50%;">
                  <input type="text" id="txtmobilecode1" maxlength="6" style=" text-align:left; margin-right:5px;">
                  <span id="infoMobileCode1"></span>
                </span>验证码
              </li>

              <li><span><input name="txtmobileNew" type="text" maxlength="11" id="txtmobileNew" value=""></span>新手机</li>

              <li>
                <a href="#myForm" id="btnGetMobileCode2" class="ajaxlangGetVerificationCode">获取验证码</a>
                <span style="width:50%;">
                  <input type="text" id="txtmobilecode2" maxlength="6" value="" style=" text-align:left; margin-right:5px;">
                  <span id="infoMobileCode2"></span>
                </span>验证码
              </li>
              <li>
                <span>
                  <input name="txtPwd2" type="password" maxlength="20" id="txtPwd2" value="" style=" text-align:left; margin-right:5px;">
                </span>二级密码
              </li>                
                
           </ul>
            <input id="CodeType1" name="CodeType" type="radio"  value="1" checked style=" display:none;" />
            <input type="hidden" id="txtmodi" value="1" />             
           <div class="sousuo">
				    	<button id="BtnSave" type="submit" class="sousuo-btn ajaxlangSubmit">提 交</button>
				    </div>      
          </div>
      </form>
  </div>
	<!--my-con end-->

</main>

<!--i-main end-->



<div data-am-widget="navbar" class="am-navbar am-cf am-navbar-default i-footer-navbar am-no-layout" id="">
  <ul class="am-navbar-nav am-cf am-avg-sm-4 ajaxheadMenu">
      <!--
      <li>
        <a href="m-main.htm" class="i-footer-active">
          <span class="i-icon icon-home"></span>
            <span class="am-navbar-label">主页</span>
        </a>
      </li>
      <li>
        <a href="#" class="">
          <span class="i-icon icon-Showings"></span>
            <span class="am-navbar-label">团队</span>
        </a>
      </li>
      <li>
        <a href="#" class="">
            <span class="i-icon icon-release"></span>
            <span class="am-navbar-label">商城</span>
        </a>
      </li>
      <li>
        <a href="#" class="">
          <span class="i-icon icon-my"></span>
            <span class="am-navbar-label">我的</span>
        </a>
      </li>
      -->
      
  </ul>
</div>

</body>
<script type="text/javascript" language="javascript">
    getTop('m-member');
    $("#btnGetMobileCode1").click(function () {
        sendMobileCode('txtmobileOld', 'infoMobileCode1');
    });
    $("#btnGetMobileCode2").click(function () {
        sendMobileCode('txtmobileNew', 'infoMobileCode2');
    });
    var pck = {
        submit: function () {
            var safeword = m.node("#safeword").plugin("text").value();
            var npassword = m.node("#npassword").plugin("text").value();
            var cnpassword = m.node("#cnpassword").plugin("text").value();
            var nsafeword = m.node("#nsafeword").plugin("text").value();
            var cnsafeword = m.node("#cnsafeword").plugin("text").value();
            var ckd = m.node("#checkcode").plugin("text").value();

            if (safeword.length <= 0) {
                mpi.news("请输入安全密码", 3000);
                return;
            }
            if (npassword.length <= 0) {
                mpi.news("请输入新登录密码", 3000);
                return;
            }
            if (npassword != cnpassword) {
                mpi.news("新登录密码输入不一致", 3000);
                return;
            }
            if (nsafeword.length <= 0) {
                mpi.news("请输入新安全密码", 3000);
                return;
            }
            if (nsafeword != cnsafeword) {
                mpi.news("新安全密码输入不一致", 3000);
                return;
            }
            if (ckd.length <= 0) {
                mpi.news("请输入验证码", 3000);
                return;
            }
            mpi.news("正在提交...", 999999);
            //发送请求
            var ajax = m.ajax("../User/api_safeinfo_submit", null, function (jso) {
                var jso = m.json.getObject(jso);
                switch (jso.Error) {
                    case 0:
                        mpi.news("修改成功", 3000, true);
                        break;
                    case -1:
                        mpi.news("安全密码验证错误", 3000);
                        break;
                    case -10001:
                        mpi.news("验证码错误", 3000);
                        break;
                    default:
                        mpi.news("服务器忙碌", 3000);
                        break;
                }
                m.node("#checkimg").click();
            });
            ajax.data.add("safeword", safeword);
            ajax.data.add("npassword", npassword);
            ajax.data.add("nsafeword", nsafeword);
            ajax.data.add("checkcode", ckd);
            ajax.send();
        },
        init: function () {
            m.node("#checkimg").click(function () {
                var checkcode = m.node("#checkimg");
                var randomstr = m.random.string().capitalAlphabet(16);
                checkcode.attr("src", "/service/check.asmx/getocode?rd=" + randomstr);
            });
            m.node("#checkimg").click();
        }
    }    
</script>
</html>